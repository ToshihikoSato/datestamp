# WEBアプリ「日付印ファクトリー」の仕様

## 1. アプリケーションの目的
日本のビジネスシーンで利用される、円形の日付スタンプ（日付印）の画像を生成するWebアプリケーション。

## 2. 表示とレイアウト
* **タイトル:** Webページのタイトルは「日付印ファクトリー」とする。
* **モダンデザイン:**
  * 背景にグラデーションを適用。
  * コンテンツエリアは、ガラスのような半透明効果（グラスモーフィズム）を持つカードデザインとする。
  * 入力フォームやボタンにはアイコンを使用し、視認性と操作性を高める。
* **ダークモード対応:**
  * ユーザーのOS（オペレーティングシステム）のテーマ設定を自動で検知し、ライトモードまたはダークモードを適用する。
  * 手動での切り替え機能は提供しない。
* **フッター:**
  * ページ下部に`© ANTAS, Inc.`と表示する。
  * 会社名「ANTAS, Inc.」は`https://antas.co.jp`へのハイパーリンクとする。
* **基本デザイン:**
  * スタンプは赤色の円形。
  * 内部は3つの段に均等に分割される。
  * 各段は円の縁に接する横棒で区切られる。
* **レスポンシブ対応:** PCでは入力欄とプレビューを2カラムで表示し、スマートフォンでは縦1列に表示される。

## 3. 各段のコンテンツ
* **上段:** ユーザーがテキストフィールドに入力した文字列（役職名、部署名など）を表示する。初期値は「農水相」とする。
* **中段:** 日付を表示する。
  * 初期値として、アクセスした当日の日付が自動で設定される。
  * ユーザーは日付選択フォームを使い、任意の日付に変更可能。
  * 表示形式は「YYYY.M.D」（例: `2025.6.26`）。
* **下段:** ユーザーがテキストフィールドに入力した文字列（氏名など）を表示する。初期値は「大泉(進)」とする。

## 4. テキストの自動サイズ調整
* **基本ルール:** 各段のテキストは、円形からはみ出さない範囲で、可能な限り最大のフォントサイズで表示される。
* **最適化ロジック:**
  * 上段と下段のテキストは、それぞれのセクションの垂直中央から少しだけ区切り線側に寄せて配置する。
  * 描画するテキストの左右にも一定のマージンを確保し、文字が円弧に近づきすぎないように調整する。

## 5. 機能
* **リアルタイムプレビュー:**
  * ユーザーがフォームに文字を入力したり、日付を変更したりすると、即座にプレビュー用の`canvas`に結果が反映される。
* **画像ダウンロード機能:**
  * 「PNGでダウンロード」ボタンと「SVGでダウンロード」ボタンを設置する。
  * ダウンロードされる画像は、背景が透明なPNG形式、またはベクター形式のSVGとなる。
  * ファイル名は `stamp_日付_名前.png` または `.svg` の形式で自動生成される。
* **ドラッグ＆ドロップによる画像エクスポート:**
  * プレビュー画像をデスクトップや他のアプリケーションに直接ドラッグ＆ドロップすることで、画像ファイルとして貼り付けることができる。
* **フォント選択機能:**
  * ユーザーはフォントを「ゴシック体」と「明朝体」から選択できる。
  * デフォルトのフォントは「ゴシック体」とする。
* **画像サイズ選択機能:**
  * ユーザーは生成する画像の**印影サイズ**を「大 (24mm)」「中 (21mm)」「小 (18mm)」から選択できる。
  * 内部的には常に高解像度（300px）で描画し、ダウンロード時に指定された見た目のサイズに縮小することで、画質の劣化を防ぐ。
  * デフォルトのサイズは「中 (21mm)」とする。
* **入力内容の保存機能:**
  * ユーザーが入力した項目（上段・下段テキスト、日付）および選択した項目（フォント、サイズ）は、自動的にローカルブラウザに保存される。
  * 次回アプリを訪問した際に、保存された内容が自動的に復元される。
